function Profile=mod_epsilometer_merge_profile(CTDProfile,EpsiProfile,Prmin,Prmax)

ind_P=find(CTDProfile.P>=Prmin & CTDProfile.P<=Prmax);
Profile=structfun(@(x) x(ind_P),CTDProfile,'un',0);

ind_epsi=find(EpsiProfile.epsitime>=CTDProfile.ctdtime(1));
ind_tmax=find(EpsiProfile.epsitime<=CTDProfile.ctdtime(end));
for fields=fieldnames(EpsiProfile)'
    Profile.(fields{1})=EpsiProfile.(fields{1})(ind_tmin:ind_tmax); % not super clear why I need fields{1} and not simply fields
end
